---
url: https://github.com/golang/vscode-go/issues/45
title: 'debug: automatically Infer Path Mapping for Remote Debugging · Issue #45 ·
  golang/vscode-go'
archived_at: 2021-06-12T14:14:34.19776+08:00
---
<div id="readability-page-1" class="page"><div>

  
  


    
<div data-team-hovercards-enabled="" id="event-3341054289" data-gid="MDEyOkxhYmVsZWRFdmVudDMzMzkyNDc5NDE=">

    

        <p><a data-hovercard-type="user" data-hovercard-url="/users/hyangah/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/hyangah"><img height="20" width="20" alt="@hyangah" src="https://avatars.githubusercontent.com/u/4999471?s=60&amp;u=5605406d1503f90aece32bcc4d62eb8197cd9aa2&amp;v=4"/></a>
<a data-hovercard-type="user" data-hovercard-url="/users/hyangah/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/hyangah">hyangah</a>




      
changed the title
<del>Automatically Infer Path Mapping for Remote Debugging</del>

<ins>debug: automatically Infer Path Mapping for Remote Debugging</ins></p><a href="#event-3341054289"><relative-time datetime="2020-05-15T14:01:08Z">May 15, 2020</relative-time></a>

  </div>

    



    
<div data-gid="MDE1OlJlZmVyZW5jZWRFdmVudDMzNTc2MjQ5MjI=">
  
        <div id="ref-commit-c574518">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-c574518">
      <relative-time datetime="2020-05-20T17:48:56Z">May 20, 2020</relative-time>
    </a>
    <div data-channel="eyJjIjoicmVwbzoyNDU0ODQyODA6Y29tbWl0OmM1NzQ1MThiMDZmMzI5MzFhNzVkM2E2MGVkYmE1YjA5MmZhY2NiNmMiLCJ0IjoxNjIzNDc4NDczfQ==--d97c454f59680fa14af50a8c4a3e7580f4c67bed2ed2f219d2fc48814c4234a2" data-url="/golang/vscode-go/commit/c574518b06f32931a75d3a60edba5b092faccb6c/_render_node/commit/condensed">
  <div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/quoctruong/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/quoctruong">
          <img height="20" width="20" alt="@quoctruong" src="https://avatars.githubusercontent.com/u/4371645?s=60&amp;u=d611b52ff503da8b0b4f883ab5f1b5115059afd9&amp;v=4"/>
</a>        <a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/hyangah/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/hyangah">
          <img height="20" width="20" alt="@hyangah" src="https://avatars.githubusercontent.com/u/4999471?s=60&amp;u=5605406d1503f90aece32bcc4d62eb8197cd9aa2&amp;v=4"/>
</a>  </p>
</div>
    <div>
      <pre>Delve has an [API](<a href="https://godoc.org/github.com/go-delve/delve/service/rpc2#ListSourcesOut" rel="nofollow">https://godoc.org/github.com/go-delve/delve/service/rpc2#ListSourcesOut</a>) to list all the files used by the program. So we can simply get the list of files on the remote machine and map it to the files on the local machine. These include files in the `GOROOT` and `GOPATH` on the remote machine as well so we can try to map them to the files in the local machine `GOROOT` and `GOPATH`.

## Mapping local path to remote path
Since we get all the remote sources, we can retrieve all the remote source files that share the same file name with the local file. We can then do a suffix match to get the best matching remote path.
Mapping remote path to local path
This is more complicated because there are multiple places where we can try to find a match on the local machine.

However, we can use the [`ListPackagesBuildInfo`](<a href="https://godoc.org/github.com/go-delve/delve/service/rpc2#ListPackagesBuildInfoOut" rel="nofollow">https://godoc.org/github.com/go-delve/delve/service/rpc2#ListPackagesBuildInfoOut</a>) to help us retrieve all the different Go packages used. Each package item returned comes with a Directory Path and an Import Path. Using Directory Path, we can determine if the remote path is in a particular package or not:

- If the remote path is in a package, we can try to find whether the package exists on the local machine. We will be searching for it in 3 places:
    - The current user’s workspace folder.
    - The current user’s `GOPATH`.
    - The current user’s `GOMOD` folder (`%GOMOD%/pkg/mod`) if the package name contains `pkg/mod`.

- If the remote path is not in any package, then we retrieve the name of the remote path and search for files with that name in the current workspace folder. We find the best matching one using a suffix match.

Updates <a data-error-text="Failed to load title" data-id="618564369" data-permission-text="Title is private" data-url="https://github.com/golang/vscode-go/issues/45" data-hovercard-type="issue" data-hovercard-url="/golang/vscode-go/issues/45/hovercard" href="https://github.com/golang/vscode-go/issues/45">#45</a>.

Change-Id: I619c45ea4f79036db944d271169665e72dcffab8
GitHub-Last-Rev: <a data-hovercard-type="commit" data-hovercard-url="https://github.com/golang/vscode-go/commit/03830363a062b33251217bdd25dccc6ac2466493/hovercard" href="https://github.com/golang/vscode-go/commit/03830363a062b33251217bdd25dccc6ac2466493"><tt>0383036</tt></a>
GitHub-Pull-Request: <a data-error-text="Failed to load title" data-id="618563615" data-permission-text="Title is private" data-url="https://github.com/golang/vscode-go/issues/44" data-hovercard-type="pull_request" data-hovercard-url="/golang/vscode-go/pull/44/hovercard" href="https://github.com/golang/vscode-go/pull/44">#44</a>
Reviewed-on: <a href="https://go-review.googlesource.com/c/vscode-go/+/234020" rel="nofollow">https://go-review.googlesource.com/c/vscode-go/+/234020</a>
Reviewed-by: Hyang-Ah Hana Kim &lt;hyangah@gmail.com&gt;</pre>
    </div>
</div>
  </div>

  <div><p>
  This was referenced </p><relative-time datetime="2020-05-21T06:32:57Z">May 21, 2020</relative-time>
</div>



</div>

    



    
<div data-gid="MDIwOkNyb3NzUmVmZXJlbmNlZEV2ZW50MTAzNTAwNDg3Mg=="><p>
  This was referenced </p><relative-time datetime="2020-05-27T00:08:27Z">May 27, 2020</relative-time>
</div>

    



    
<div id="ref-commit-3d575bd" data-gid="MDE1OlJlZmVyZW5jZWRFdmVudDMzOTkzMTQxNjQ=">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-3d575bd">
      <relative-time datetime="2020-06-02T20:14:08Z">Jun 2, 2020</relative-time>
    </a>
    <div data-channel="eyJjIjoicmVwbzoyNDU0ODQyODA6Y29tbWl0OjNkNTc1YmQ4NmNlMTUzZjJiMDJlMTVhZmRlZjc3ZWQwZGI5ZjU5MjEiLCJ0IjoxNjIzNDc4NDczfQ==--74b807c14c540e887eaa7b6fe58e72eaadbdc6f07ac46812cfd27988948904c4" data-url="/golang/vscode-go/commit/3d575bd86ce153f2b02e15afdef77ed0db9f5921/_render_node/commit/condensed">
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/quoctruong/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/quoctruong">
          <img height="20" width="20" alt="@quoctruong" src="https://avatars.githubusercontent.com/u/4371645?s=60&amp;u=d611b52ff503da8b0b4f883ab5f1b5115059afd9&amp;v=4"/>
</a>  </p>
</div>
  </div>

    



    



    



    



    



    



    
<div id="ref-commit-d34fee8" data-gid="MDE1OlJlZmVyZW5jZWRFdmVudDM3NjkxMjY3MDQ=">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-d34fee8">
      <relative-time datetime="2020-09-15T15:58:49Z">Sep 15, 2020</relative-time>
    </a>
    <div data-channel="eyJjIjoicmVwbzoyNDU0ODQyODA6Y29tbWl0OmQzNGZlZTg2MTc2YTQ4ZTVkMzhlZDE3ODQxNWZkZWM4MDkzYzZmZWQiLCJ0IjoxNjIzNDc4NDczfQ==--a4ab5f1696f2dc610a8c3ae5e7a7ae758ab79b72aae88432f276358b1066627b" data-url="/golang/vscode-go/commit/d34fee86176a48e5d38ed178415fdec8093c6fed/_render_node/commit/condensed">
  <div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/suzmue/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/suzmue">
          <img height="20" width="20" alt="@suzmue" src="https://avatars.githubusercontent.com/u/6634754?s=60&amp;u=06ff2d64e1771afd7bddf2725dde5f2b8d07b9e1&amp;v=4"/>
</a>  </p>
</div>
    <div>
      <pre>Fix the remote debugging documentation to have the current configuration
settings.

<span aria-label="This commit closes issue #164.">Fixes</span> <a data-error-text="Failed to load title" data-id="629653370" data-permission-text="Title is private" data-url="https://github.com/golang/vscode-go/issues/164" data-hovercard-type="issue" data-hovercard-url="/golang/vscode-go/issues/164/hovercard" href="https://github.com/golang/vscode-go/issues/164">#164</a>
Updates <a data-error-text="Failed to load title" data-id="618564369" data-permission-text="Title is private" data-url="https://github.com/golang/vscode-go/issues/45" data-hovercard-type="issue" data-hovercard-url="/golang/vscode-go/issues/45/hovercard" href="https://github.com/golang/vscode-go/issues/45">#45</a>

Change-Id: I4df7b080d2e26275218ccbdf3d79d3b82c44bd8c
Reviewed-on: <a href="https://go-review.googlesource.com/c/vscode-go/+/253741" rel="nofollow">https://go-review.googlesource.com/c/vscode-go/+/253741</a>
Trust: Suzy Mueller &lt;suzmue@golang.org&gt;
Reviewed-by: Polina Sokolova &lt;polina@google.com&gt;
Reviewed-by: Quoc Truong &lt;quoct@google.com&gt;</pre>
    </div>
</div>
  </div>

    



    




      
<div data-team-hovercards-enabled="" id="event-4328340697" data-gid="MDI2Ok1vdmVkQ29sdW1uc0luUHJvamVjdEV2ZW50NDMyODM0MDY5Nw==">

    

      <p><a href="https://github.com/golang/vscode-go/projects/1" data-skip-pjax="">Debug</a>
<span>automation</span>


        moved this from <strong>In progress</strong>
  to <strong>Closed</strong></p><a href="#event-4328340697"><relative-time datetime="2021-02-14T02:39:30Z">Feb 14, 2021</relative-time></a>

  </div>




  
  

</div></div>