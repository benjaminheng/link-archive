---
url: https://medium.com/jaegertracing/jaeger-and-opentelemetry-1846f701d9f2
title: Jaeger and OpenTelemetry - JaegerTracing - Medium
archived_at: 2021-12-13T16:09:23.193021+08:00
---
<div id="readability-page-1" class="page"><section><div><div><a rel="noopener follow" href="https://medium.com/@YuriShkuro?source=post_page-----1846f701d9f2-----------------------------------"><div><p><img alt="Yuri Shkuro" src="https://miro.medium.com/fit/c/96/96/0*4Ljs60hv_8hpF_mj.jpg" width="48" height="48"/></p></div></a></div><figure><div role="button" tabindex="0"><p><img alt="" src="https://miro.medium.com/max/1400/1*jJm7BHkMListmocakAMcqA.png" width="700" height="350" role="presentation"/></p></div></figure><p id="efb5">Recently, <a href="https://opentelemetry.io" rel="noopener ugc nofollow" target="_blank">OpenTelemetry</a> has been announced as a new <a href="https://cncf.io" rel="noopener ugc nofollow" target="_blank">CNCF</a> sandbox project resulting from a merger of <a href="https://opentracing.io" rel="noopener ugc nofollow" target="_blank">OpenTracing</a> and <a href="https://opencensus.io" rel="noopener ugc nofollow" target="_blank">OpenCensus</a> [1], [2], [3], [4]. Several people have already asked me what OpenTelemetry means for the Jaeger project (incubating at CNCF), and whether it is going to replace Jaeger. I will attempt to answer these questions in this post.</p><blockquote><p id="86ff">TLDR; OpenTelemetry is great news for the Jaeger project!</p></blockquote><p id="1031">I’ve been working on OpenTracing from its inception at a Zipkin workshop back in the Fall of 2015. We had just begun deploying distributed tracing at Uber, and I knew that we needed an open, vendor-neutral API to incorporate into the source code of Uber’s rapidly growing microservices ecosystem. Today, OpenTracing APIs exist in 9+ languages, enjoys wide support from vendors, and has over 100 integrations with various open source projects (<a href="https://opentracing.io/registry" rel="noopener ugc nofollow" target="_blank">https://opentracing.io/registry</a>).</p><p id="c4d4">OpenCensus is an open-source reincarnation of Google’s internal Census libraries used for collecting tracing and metrics data. It took a different approach by providing a concrete, opinionated implementation for capturing observability signals. By employing “batteries included” approach it had an advantage over OpenTracing for software that was shipped as binaries, such as database engines, Kubernetes components, etc., because the binaries could link to a known implementation rather than use late binding to concrete tracers that was required by the OpenTracing approach. On the downside, since OpenCensus APIs were tightly coupled to the implementations, it was difficult and often impossible to bind the instrumentation to different implementations even when users wanted it.</p><p id="7295">Both projects were aiming to make observability easy for modern applications and expedite wide adoption of distributed tracing by the software industry, yet their competition with each other, which normally would be a very healthy thing, was achieving exactly the opposite. Being faced with two competing standards, the end users were stuck with the “VHS vs. Betamax” choice.</p><p id="beab">It turns out that the approaches of the two projects were complementary, rather than contradictory. There was no reason why we couldn’t have both the abstract, vendor-neutral API <em>and</em> a well-supported, default implementation. Enter OpenTelemetry!</p><p id="cfb8">The greatest promise of OpenTelemetry is not to solve some new problems that OpenTracing and OpenCensus did not solve. Instead, it is the promise of a <em>single standard</em> instead of competing two standards. Towards that goal the first GA versions of OpenTelemetry libraries are intentionally narrowly scoped to:</p><ul><li id="7dce">Be backwards compatible with OpenTracing and OpenCensus instrumentation via shims.</li><li id="6bab">Avoid introducing new features not already present in the two original projects</li></ul><blockquote><p id="9ea8">The greatest promise of OpenTelemetry is a single standard for observability instead of two competing standards.</p></blockquote><p id="7540">I recently wrote an article about the <a rel="noopener" href="https://medium.com/jaegertracing/embracing-context-propagation-7100b9b6029a">importance of distributed context propagation</a> for modern distributed systems. We all know that tracing cannot function without it, but it is not the only application that can benefit from context propagation. Many popular telemetry APIs (metrics and logging) are not context-aware, which makes some of the use cases describes in my article very difficult to support, especially in languages like Go where the access to the context must be explicit. To its credit, the OpenCensus project had always intended for the telemetry APIs to be context-aware, whereas in OpenTracing the general purpose context propagation (aka “baggage”) was built into the tracing API, which made it awkward to use from, say, metrics APIs. One of the great side effects of merging the two projects is the agreement to separate context propagation into an <a href="https://github.com/open-telemetry/opentelemetry-specification/issues/9#issuecomment-491459867" rel="noopener ugc nofollow" target="_blank">underlying API layer</a> used by the other telemetry APIs to access contextual data. I wrote a design proposal “<a href="https://docs.google.com/document/d/1UxrEYOaQlF_E4gtiPoFmcZ4YKKe1GxohvCvQDuwvD1I/" rel="noopener ugc nofollow" target="_blank">Context Propagation Layers</a>” that goes into more details.</p><figure><div role="button" tabindex="0"><p><img alt="" src="https://miro.medium.com/max/1400/1*uLB1_21itJ0XJ8GLy3uqOQ.png" width="700" height="536" srcset="https://miro.medium.com/max/552/1*uLB1_21itJ0XJ8GLy3uqOQ.png 276w, https://miro.medium.com/max/1104/1*uLB1_21itJ0XJ8GLy3uqOQ.png 552w, https://miro.medium.com/max/1280/1*uLB1_21itJ0XJ8GLy3uqOQ.png 640w, https://miro.medium.com/max/1400/1*uLB1_21itJ0XJ8GLy3uqOQ.png 700w" sizes="700px" role="presentation" data-old-src="https://miro.medium.com/max/60/1*uLB1_21itJ0XJ8GLy3uqOQ.png?q=20"/></p></div><figcaption>Layering of context propagation and telemetry APIs</figcaption></figure><p id="8e36">Unlike some other tracing backends, the Jaeger project was never meant to solve the code instrumentation problem. By shipping tracer libraries compatible with OpenTracing, we were able to leverage the rich ecosystem of existing OpenTracing-compatible instrumentation, and focus our efforts on building the tracing backend, visualization tools, and data mining techniques.</p></div><div><figure><div role="button" tabindex="0"><p><img alt="" src="https://miro.medium.com/max/2000/1*IR188vUGrmz8QziMEAzIvg.png" width="1000" height="522" role="presentation"/></p></div><figcaption>How Jaeger works with OpenTracing</figcaption></figure></div><div><p id="0be8">This model still works with the emergence of OpenTelemetry, which is aimed at the instrumentation space. The end users will be able to instrument their applications or frameworks with OpenTelemetry SDK and use Jaeger as the backend for tracing data.</p><p id="8bc5">Then there is the question about the future of Jaeger tracers (client libraries), which do occupy the same problem space as OpenTelemetry. In the short term, Jaeger client libraries can be changed to implement the OpenTelemetry API. This may be necessary in order to support new style of instrumentation while keeping the existing functionality that is specific to Jaeger (such as adaptive sampling).</p><p id="9ea7">In the long term, we will seriously consider freezing development of Jaeger client libraries and porting their unique features to OpenTelemetry default implementations, either upstream or as plugins. Developing and maintaining client libraries in multiple languages is a significant investment of project resources, which would be better spent on building new backend features.</p></div><div><figure><div role="button" tabindex="0"><p><img alt="" src="https://miro.medium.com/max/2000/1*LJT2MtqLOuXLAEh05RKDtg.png" width="1000" height="522" role="presentation"/></p></div><figcaption>How Jaeger works with OpenTelemetry</figcaption></figure></div><div><p id="474f">The “battery included” approach did not always work well even for OpenCensus libraries, because they still needed to be configured with specific exporter plugin in order to send data to concrete tracing backends, like Jaeger or Zipkin. To address that issue, the OpenCensus project started development of two backend components called <strong>agent</strong> and <strong>collector</strong>, playing nearly identical roles to Jaeger’s agent and collector:</p><ul><li id="f870"><strong>agent</strong> is a sidecar / host agent that receives telemetry from the client library in a standardized format and forwards it to collector;</li><li id="20d5"><strong>collector</strong> translates the data into the format understood by a specific tracing backend and sends it there. OpenCensus Collector is also able to perform tail-based sampling.</li></ul><p id="1f14">These two components have a much larger overlap with the functionality of the respective Jaeger backend components. However, they are still limited to the problem space of <em>data gathering</em>, rather than trace storage or post-processing. It means that in the future we might also strongly consider deprecating Jaeger agent and collector components and instead deploying the respective OpenTelemetry components. The main open question is whether OpenTelemetry components will be able to support additional features provided by the Jaeger components, such as adaptive sampling.</p><p id="46d7">As I stated at the beginning, the OpenTelemetry project is a good news for the Jaeger project, as they are very much complementary in terms of problem domains each is trying to address. In the areas where there is an overlap, namely client libraries, agent &amp; collector, we are planning to collaborate with OpenTelemetry and ideally deprecate the respective Jaeger components so that we don’t have to waste time maintaining redundant software.</p><ol><li id="b958"><a rel="noopener" href="https://medium.com/opentracing/a-roadmap-to-convergence-b074e5815289">OpenTracing and OpenCensus are merging</a> (OpenTracing blog)</li><li id="939f"><a href="https://www.cncf.io/blog/2019/05/21/a-brief-history-of-opentelemetry-so-far/" rel="noopener ugc nofollow" target="_blank">A Brief History of OpenTelemetry (So Far)</a> (CNCF blog)</li><li id="9d16"><a href="https://www.youtube.com/watch?v=IdYZphA5S7s" rel="noopener ugc nofollow" target="_blank">OpenTelemetry: Panel Discussion and Q&amp;A</a> (KubeCon EU video)</li><li id="4c94"><a href="https://www.youtube.com/watch?v=mvWwSkBq9sY" rel="noopener ugc nofollow" target="_blank">OpenTelemetry: Backwards Compatibility with OpenTracing and OpenCensus</a> (KubeCon EU video)</li></ol></div></section></div>